<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0">
 <title>Document</title>
</head>
<body>
 <p class="count-place">0</p>
 <p class="number2">0</p>
 
 
 <script>
  const countPlace = document.querySelector(".count-place");
  const numberTwo = document.querySelector(".number2");
  // const goal = 12345;

  //for문만으로 count-up 구현하기

  // for(let i = 0; i <= goal; i++) {
  //  setTimeout(() => {
  //   countPlace.innerText = i;
  //   console.log(i / goal);
  //  }, i / goal * 5000);
  // }

  //while문으로 count-up 구현하기
  //먼저 실행하고 결괏값이 나온다.
  // let timer = 0;
  // let now = 0;
  // let count = 0;
  // while(true) {
  //  setTimeout(() => {
  //   countPlace.innerText = Number((countPlace.innerText) + parseInt(goal / (count + 2)));
  //   console.log("실행!");
  //   console.log(parseInt(goal / (count + 2)));
  //   count++;
  //  }, timer)
  //  timer += 100;
  //  if(timer === 10000) {
  //   setTimeout(() => {
  //    countPlace.innerText = goal;
  //   }, timer);
  //   break;
  //  }
  // }

  //Easing함수를 추가해 변화율 지정하기
  //https://easings.net/ 
  //TypeScript에서 사용하는 number이기에 JavaScript에서는 지워야 한다.
  // const countDuration = 5000; //Play-Time
  // const framePerSec = 60; //시간당 프레임 숫자 높을수록 부드러워지나 프로그램이 무거워짐
  
  makeCountUp(countPlace,10000,5000,60);
  makeCountUp(numberTwo,10000,5000,60);
  
  function makeCountUp(target,goal,countDuration,framePerSec) {
   
   const numberOfRun = countDuration * framePerSec / 1000; // 실행횟수

   for(let i = 0; i < numberOfRun; i++) {
    const progress = i / (numberOfRun - 1); //progress -> 진행도
    setTimeout(() => {
      target.innerText = parseInt(easeOutCubic(progress) * goal);
    }, (countDuration / numberOfRun) * (i + 1));
   }  
  }
  
  function easeOutCubic(x)  {
   return 1 - Math.pow(1 - x, 3); //Math.pow 제곱근 공식
}

 </script>
</body>
</html>
